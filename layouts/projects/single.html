{{ define "main" }}

<div style="max-width: 1200px; margin: 0 auto; padding: 4rem 3rem;">
  
  {{/* Project Header - Centered, Narrow */}}
  <header style="max-width: 50rem; margin: 0 auto 4rem;">
    <h1 style="font-size: 3rem; font-weight: 300; margin-bottom: 1rem; font-style: italic;">
      {{ .Title }}
    </h1>
  </header>

  {{/* Project Content - Centered, Narrow */}}
  <div style="max-width: 50rem; margin: 0 auto 4rem; font-size: 1.0625rem; line-height: 1.8;">
    {{ .Content }}
  </div>

  {{/* Updates Section - Centered, Narrow */}}
  {{ if .Params.series }}
    {{ $seriesName := strings.ToLower (index .Params.series 0) }}
    {{ $allPosts := sort (index .Site.Taxonomies.series $seriesName) "Date" "desc" }}
    {{ $blogPosts := where $allPosts "Section" "blog" }}
    
    {{ $latestPost := index $blogPosts 0 }}
    {{ $olderPosts := after 1 $blogPosts }}
    
    {{/* Latest Update */}}
    {{ if $latestPost }}
      <div style="max-width: 50rem; margin: 4rem auto;">
        <h2 style="font-size: 2rem; font-weight: 300; margin-bottom: 2rem; font-style: italic;">
          Latest Update
        </h2>
        <div style="margin-bottom: 2rem;">
          <div style="font-size: 0.875rem; color: #999; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em;">
            {{ $latestPost.Date.Format "January 2, 2006" }}
          </div>
          <div style="font-size: 1.0625rem; line-height: 1.8;">
            {{ $latestPost.Content }}
          </div>
        </div>
      </div>
    {{ end }}
    
    {{/* Past Updates */}}
    {{ if $olderPosts }}
      <div style="max-width: 50rem; margin: 4rem auto;">
        <h2 style="font-size: 2rem; font-weight: 300; margin-bottom: 2rem; font-style: italic;">
          Past Updates
        </h2>
        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
          {{ range $olderPosts }}
            <div>
              <a href="{{ .RelPermalink }}" style="text-decoration: none; font-size: 1.25rem; display: block; margin-bottom: 0.25rem;">
                {{ .Title }}
              </a>
              <div style="font-size: 0.875rem; color: #999; text-transform: uppercase; letter-spacing: 0.05em;">
                {{ .Date.Format "January 2, 2006" }}
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    {{ end }}
  {{ end }}

  {{/* Comments - Shared Partial */}}
  {{ partial "comments.html" . }}

</div>

{{ end }}
