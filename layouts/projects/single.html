{{ define "main" }}

<div style="background-color: #faf8f5 !important; min-height: 100vh;">
<article style="max-width: 1000px; margin: 0 auto; padding: 4rem 3rem; background-color: #faf8f5 !important; background: #faf8f5 !important;">
  
  {{/* Project Header */}}
  <header style="margin-bottom: 4rem; border: none !important; background-color: #faf8f5 !important; background: #faf8f5 !important; text-align: left;">
    <h1 style="font-family: Georgia, serif; font-size: 3rem; font-weight: 300; color: #2d2d2d; margin-bottom: 1rem; font-style: italic; border: none !important; background-color: #faf8f5 !important; background: #faf8f5 !important; text-align: left;">
      {{ .Title }}
    </h1>
  </header>

  {{/* Project Content (Concept, Challenge, Materials) */}}
  <div style="max-width: 42rem; font-family: Georgia, serif; font-size: 1.0625rem; line-height: 1.8; color: #5a5a5a; background-color: #faf8f5 !important; background: #faf8f5 !important; margin-bottom: 4rem;">
    {{ .Content }}
  </div>

  {{/* Updates Section */}}
  {{ if .Params.series }}
    {{ $seriesName := strings.ToLower (index .Params.series 0) }}
    {{ $allPosts := sort (index .Site.Taxonomies.series $seriesName) "Date" "desc" }}
    {{ $blogPosts := where $allPosts "Section" "blog" }}
    
    {{ $latestPost := index $blogPosts 0 }}
    {{ $olderPosts := after 1 $blogPosts }}
    
    {{/* Latest Update */}}
    {{ if $latestPost }}
      <div style="margin-top: 4rem; margin-bottom: 4rem; background-color: #faf8f5 !important;">
        <h2 style="font-family: Georgia, serif; font-size: 2rem; font-weight: 300; color: #2d2d2d; margin-bottom: 2rem; font-style: italic; border: none !important; background-color: #faf8f5 !important;">
          Latest Update
        </h2>
        <div style="max-width: 42rem; background-color: #faf8f5 !important;">
          <time datetime="{{ $latestPost.Date.Format "2006-01-02" }}" style="display: block; color: #999999; font-size: 0.875rem; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em; background-color: #faf8f5 !important;">
            {{ $latestPost.Date.Format "January 2, 2006" }}
          </time>
          <div style="font-family: Georgia, serif; font-size: 1.0625rem; line-height: 1.8; color: #5a5a5a; background-color: #faf8f5 !important;">
            {{ $latestPost.Content }}
          </div>
        </div>
      </div>
    {{ end }}
    
    {{/* Past Updates */}}
    {{ if $olderPosts }}
      <div style="margin-top: 4rem; background-color: #faf8f5 !important;">
        <h2 style="font-family: Georgia, serif; font-size: 2rem; font-weight: 300; color: #2d2d2d; margin-bottom: 2rem; font-style: italic; border: none !important; background-color: #faf8f5 !important;">
          Past Updates
        </h2>
        <div style="max-width: 42rem; display: flex; flex-direction: column; gap: 2rem; background-color: #faf8f5 !important;">
          {{ range $olderPosts }}
            <article style="background-color: #faf8f5 !important; background: #faf8f5 !important; padding-bottom: 2rem; border-bottom: 1px solid rgba(232, 228, 223, 0.5);">
              <time datetime="{{ .Date.Format "2006-01-02" }}" style="display: block; color: #999999; font-size: 0.875rem; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">
                {{ .Date.Format "January 2, 2006" }}
              </time>
              <h3 style="margin-bottom: 0; background-color: #faf8f5 !important;">
                <a href="{{ .RelPermalink }}" style="font-family: Georgia, serif; font-size: 1.35rem; font-weight: 400; color: #2d2d2d; text-decoration: none;">
                  {{ .Title }}
                </a>
              </h3>
            </article>
          {{ end }}
        </div>
      </div>
    {{ end }}
  {{ end }}

</article>
</div>

<style>
  /* Kill white backgrounds */
  article {
    background-color: transparent !important;
    background: none !important;
  }
  
  /* Kill all borders on headers */
  article header,
  article h1,
  article h2 {
    border: none !important;
    border-bottom: none !important;
  }
  
  /* Style content headings */
  article h2 {
    font-family: Georgia, serif;
    font-size: 1.75rem;
    font-weight: 400;
    color: #2d2d2d;
    margin-top: 3rem;
    margin-bottom: 1rem;
  }
  
  article h3 {
    font-family: Georgia, serif;
    font-size: 1.35rem;
    font-weight: 400;
    color: #2d2d2d;
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
  }
  
  article p {
    margin-bottom: 1.5rem;
  }
  
  article strong {
    color: #2d2d2d;
    font-weight: 500;
  }
  
  article a {
    color: #c7653b;
    text-decoration: none;
  }
  
  article a:hover {
    text-decoration: underline;
  }
  
  article ul, article ol {
    margin: 1.5rem 0;
    padding-left: 2rem;
  }
  
  article li {
    margin-bottom: 0.75rem;
  }
</style>

{{ end }}
